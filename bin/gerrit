#!/bin/bash

this=$(basename "$0")

# colors
RED="\033[0;31m"
YELLOW="\033[1;33m"
GREEN="\033[0;32m"
NO_COLOR="\033[0m"
BOLD="\033[1m"
UNDERLINE="\033[4m"

die() {
	echo -e "${RED}${@}${NO_COLOR}"
	exit 1
}

warn() {
	echo -e "${YELLOW}${@}${NO_COLOR}"
}

good() {
	echo -e "${GREEN}${@}${NO_COLOR}"
}

printShortUsage() {
	cat << EOF
Usage: $this GERRIT_SSH COMMAND [ARG ...] [--] [--help (-h)]
       $this --help

       GERRIT_SSH are: ssh://id@gerrit_server:port

EOF
}

# Check commands
GIT=$(which git)
if [[ -z "$GIT" ]]; then
	die "git is not installed"
fi

SSH=$(which ssh)
if [[ -z "$SSH" ]]; then
	die "ssh is not installed"
fi

if [ "" = "$1" ] ; then
	printShortUsage
	exit 1
fi

if [ "--help" = "$1" ] ; then
	printShortUsage
	exit 0
fi

SERVER=$1
shift

ssh "$SERVER" gerrit $@
